<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Registrar Receta</title>

    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/css/bootstrap.min.css" integrity="sha384-TX8t27EcRE3e/ihU7zmQxVncDAy5uIKz4rEkgIXeMed4M0jlfIDPvg6uqKI2xXr2" crossorigin="anonymous">
    
    <link rel="stylesheet" href="{{ url_for('static', filename='css/registroReceta.css') }}">
    <link href="//maxcdn.bootstrapcdn.com/bootstrap/4.1.1/css/bootstrap.min.css" rel="stylesheet" id="bootstrap-css">
<script src="//maxcdn.bootstrapcdn.com/bootstrap/4.1.1/js/bootstrap.min.js"></script>
<script src="//cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
</head>
<body>
    <div class="container register">
        <div class="row">
            <div class="col-md-3 register-left">
                <img src="https://images.vexels.com/media/users/3/179444/isolated/lists/2de090d7b621bcb0ed5315357622f124-pastry-cake-cherry-flat.png" alt=""/>
                <h3>CUK</h3>
                <p>Hay que comer para vivir, no vivir para comer</p>
                <input type="file" id="fileChooser" style="display: none;"/>
                <button class="btnRegister" onclick="cargarArchivo(fileChooser)">Cargar Archivo</button></br>
                <a href="/home/usuario"><h3 class="register-heading">REGRESAR A HOME</h3></a>
            </div>
            <div class="col-md-9 register-right">
                
                <div class="tab-content" id="myTabContent">
                    <div class="tab-pane fade show active" id="home" role="tabpanel" aria-labelledby="home-tab">
                        <h3 class="register-heading">REGISTRAR RECETA</h3>
                        <div class="row register-form">
                            <div class="col-md-6">
                                <form  action="" method="POST" >
                                    <input type="text" class="form-control" name= "titulo" placeholder="Titulo del platillo" value="" /></br>
                                    <textarea class="form-control" rows="3" name ="resumen" placeholder="Resumen"></textarea></br>
                                    <textarea class="form-control" rows="3" name ="ingredientes" placeholder="Ingredientes"></textarea></br>
                                        <textarea class="form-control" rows="3" name ="preparacion" placeholder="Preparación"></textarea></br> 
                                        <input type="text" name="tiempo" class="form-control" placeholder="Tiempo de Preparación" value="" /></br> 
                                         <input type="text" class="form-control" name="imagen" placeholder="Url de la Imagen" value="" /></br>
                                         <input type="submit" class="btnRegister"  value="Registrar"/>
                                </form>
                            </div>
                        </div>
                    </div>
                </div>
            </div>


            <script>

var fileChooser = document.getElementById('fileChooser');
  if (fileChooser)
    fileChooser.addEventListener("change", subirArchivo)

  function subirArchivo()
  {
    let reader = new FileReader();

    reader.onload = function ()
    {
      let datos = {
        data: reader.result.replace('data:', '')
          .replace(/^.+,/, '')
      }
      fetch('/cargarArchivo', {
        method: 'POST',
        headers: {
          'Content-Type': 'application/json'
        },
        body: JSON.stringify(datos)
      }).then(res =>
      {
        location.reload();
      });
    }

    reader.onerror = function (error)
    {
      console.log('Error: ', error);
    };

    reader.readAsDataURL(fileChooser.files[0]);
  }

  function cargarArchivo(input)
  {
    input.click();
  }


            </script>       
</body>
    </html>